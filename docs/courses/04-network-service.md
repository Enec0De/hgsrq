---
title: 云网络服务
status: deprecated
---

云网络服务
==========

云网络是云计算的基础，它连接了分布在全球各地的数据中心、服务器、应用程序和用户。

---

1. 计算机网络
-------------

### 1.1. 计算机网络形成

**网络信息传输**

> 网络的定义

**互联网的初期**

-   1837 年：摩尔斯电报
-   1876 年：电话
-   1878 年：人工交换机
-   1891 年：步进式交换机
-   1926 年：纵横式自动交换机
-   1958 年：程控模拟交换机
-   1965/1970 年：电子/数字程控交换机
-   2004 年：NGN 交换机

**互联网的发展**

-   1969.10 月：ARPANET 网
-   1969.12 月：NCP 协议
-   1973 年：TCP/IPv3 协议
-   1979 年：OSI 七层模型
-   1980 年：TCP/IPv4 协议
-   1982 年：TCP/IP 替代 NCP
-   1983 年：ARPANET 划分军用民用
-   1984 年：TCP/IP 主流标准

### 1.2. 基本网络通讯原理

1.  **OSI 七层模型**
   
1.  **TCP/IP 协议**
   
1.  **端口**
   
1.  **网络通讯的基本元素**
   
    -   IP 地址
    -   子网掩码
    -   网关
    
1.  **VLAN与MAC、ARP**
    
1.  **私有地址和公有地址**
    
    > 私有地址如何连通公网？通过 NAT 网络地址转换技术
    
1.  **NAT 网络地址转换**
    
1.  **网关和路由器**
    
1.  **动态路由协议**
    
    -   OSPF 协议
    
1.  **路由**
    
    > 路由的分类
    
1.  **路由协议**
    
    -   IGP
        -   RIP
        -   EIGRP
        -   OSPF
        -   IS-IS
    
    -   EGP
        -   BGP
    
1.  **网络访问控制列表与端口**
    
1.  **域名与 DNS**
    
    -   HPPT 状态码
    
1.  **自治系统**
    
### 1.3. 常见网络架构及设备

**常见网络架构：**

-   主要分为两个部分：公网网络部分、局域网部分

-   主要分为四个层次：边缘层、核心层、汇聚层、接入层

**常见网络设备：**

-   路由器
-   交换机
-   防火墙

---

2. 私有网络
-----------

### 2.1. 云计算网络形成

**云计算的发展背景：**

从打井取水到自来水公司供应、从企业自己发电到发电站供应。

**云计算数据中心演进：**

自建机房 - 单中心 - 异地灾备 - 两地三中心 - 多地多中心

虚拟化 + SDN + 分布式 -> 云计算

-   网络功能虚拟化（NFV）
-   软件定义网络（SDN）

> NFV 和 SDN 的区别

**云网络：**

> 什么是云网络

**传统数据中心网络：**

> 传统数据中心网络面临的挑战？SDN 如何助力解决这些问题？

**Underlay 网络和 Overlay 网络：**

> 两者的区别

**云计算网络的特征：**

-   虚拟化和多租户支持
-   软件定义网络（SDN）
-   自动化和自服务性
-   弹性和可扩展性
-   安全性和隔离

**云计算网络通讯场景：**

-   云上网络
-   跨地域网络
-   混合云网络

**云计算网络的划分：**

地域和可用区是云服务商划分自己拥有的物理计算资源的一种方法。

### 2.2. 私有网络 VPC 介绍

**私有网络的定义：**

私有网络（Virtual Private Cloud, VPC）是基于云厂商构建的专属云上的网络空间。

**技术实现：**

通过 SDN 在物理网络 underdlay network 上构建虚拟网络平面 overlay network。腾讯云则是用 IP-IN-GRE 进行隧道封装，通过 GRE 协议头部存储的 VPCID 信息实现 overlay 数据封装。

**私有网络产品分类：**

-   网络自定义
-   内网互联
-   安全服务
-   Internet 服务

**私有网络的优势：**

-   自定义网络
-   弹性可扩展
-   丰富接入
-   安全可靠
-   简单易用

### 2.3. 私有网络应用场景

访问公网

-   单个云服务器访问公网
-   多云服务器安全访问公网

对公网提供访问

-   单个云服务器提供服务
-   多个云服务器负载均衡

应用容灾

-   跨可用区容灾
-   跨地域容灾

部署混合云

-   连接本地数据中心
-   全国多点互联
-   构建云上多数据中

VPN 连接

-   IPsec VPN
-   SSL VPN

专线接入

-   使用传统的专用通道打通用户 IDC 与云上 VPC
-   使用云联网产品实现互通

对等连接

云联网

-   关联网络实例
-   路由表

> 云联网与对等连接、专用通道的区别

### 2.4. 腾讯云私有网络配置使用

建议查看官方文档。

---

3. 负载均衡
-----------

### 3.1. 负载均衡形成

> 负载均衡的形成过程

### 3.2. 负载均衡介绍

**负载均衡概述：** 

负载均衡是将流量分配到多台后段服务器的服务。

**负载均衡的作用：**

-   解决并发压力，提高应用处理性能
-   提供故障转移，实现高可用
-   通过添加或减少服务器数量，提供网站伸缩性
-   安全防护

**负载均衡分类：**

-   设备对象
    -   软件负载均衡
    -   硬件负载均衡

-   网络层次
    -   二层负载均衡技术
    -   三层负载均衡技术
    -   四层负载均衡技术
    -   七层负载均衡技术

-   地理结构
    -   本地负载均衡
    -   全局负载均衡

> 主要关注四层负载均衡技术和七层负载均衡技术

常见的四层负载均衡软件：F5、lvs、nginx、haproxy
常见的七层负载均衡软件：haproxy、nginx、apache

**云负载均衡特性与优势：**

-   高性能
-   高可用
-   安全稳定
-   低成本

**负载均衡常见流量分发算法：**

-   轮询算法
-   最少连接算法
-   原地址哈希算法

**云计算均衡负载转发原理：**

> 了解原理

### 3.3. 负载均衡应用场景

**案例：DNS 轮询 + LVS（DR）+ Keepalived + Nginx 方案**

### 3.4. 腾讯云负载均衡 CLB 配置使用

看官方文档。

---

4. 内容分发网络
---------------

### 4.1. 内容分发网络形成

**内容分发网络产生背景：**

内容分发网络（Content Delivery Network, CDN）诞生于 20 世纪 90 年代，当时网络迅速发展，网络请求增多，导致骨干网的压力大，长传效果差。内容分发网络通过将站点内容发布至遍布全球的海量加速节点，使其用户可就近获取所需内容。

**内容分发网络发展：**

-   2003 年：Akamai 推出了动态网站加速方案，开启动态交互加速时代
-   2005 年：网宿科技推出 CDN 静态加速产品
-   2005 - 2010 年：以 AWS 为代表的全球云厂商开始进入 CDN 加速市场
-   2010 - 2014 年：蓝汛与网宿相继推出动态加速产品 GAD、WSA、APPA
-   2012 - 2020 年：AWS、Google、Cloudflair 逐步开拓动态、全站加速市场
-   2017 - 2019 年：公有云厂商阿里、腾讯推出了动态（全站）加速产品 DCDN、GA 与 DSA（19年改名ECDN）、GAAP

### 4.2. 内容分发网络介绍

内容分发网络是在现有的 Internet 中增加的一层新的网络架构，由遍布全球的高性能加速节点构成。通过 CDN 的负载均衡、内容分发、调度等功能模块，使用户能就近获取所需内容。

**内容分发网络的作用：**

> CDN 可以有效地解决目前互联网业务中网络层面哪些问题？

**内容分发网络的基本概念：**

`自有源站`

:   内容分发的起点

`边缘节点`

:   靠近用户的分布式服务节点

`CNAME 记录`

:   域名解析中的别名记录（Canonical Name）

`静态内容`

:   不会频繁变化的内容

`动态内容`

:   用户请求实时生成的内容

`回源`

:   当边缘节点没有缓存内容，或当缓存过期时，向源站请求数据的过程

`缓存预热`

:   在用户访问前，将文件下载到边缘节点缓存中

**内容分发网络的特征：**

-   高速传输
-   负载均衡
-   内容缓存
-   攻击防护
-   可伸缩性
-   可靠性

**内容分发网络的整体架构：**

> CDN 的整体架构和所涉及的关键技术。

**内容分发网络的组件：**

-   边缘服务器
-   负载均衡器
-   缓存
-   分发节点管理
-   分发管理系统
-   源站

**内容分发网络的调度系统：**

1.  基于地理位置的调度

    -   DNS 调度策略
    -   302 调度策略

1.  基于内容的调度
1.  基于质量的调度
1.  基于成本的调度
1.  基于故障处理的调度

    -   路由调度策略

### 4.3. 内容分发网络应用场景

-   网站加速
-   下载加速
-   音视频加速
-   全站加速

### 4.4. 腾讯云内容分发网络配置使用

看官方文档。

---

5. 网络安全
-----------

### 5.1. DDoS 防护

**DDoS 攻击：**

> 什么是 DDoS 攻击？

**遭受 DDoS 攻击的现象：**

-   DDoS 攻击分为三类：协议攻击、应用层攻击、容量攻击
-   遭受 DDoS 攻击的现象有：大量无用连接、系统卡顿、网络拥塞、无法响应

**DDoS 攻击种类：**

-   根据豹纹类型的不同，可以分为：TCP Flood、UDP Flood、HTTP Flood 和 DNS Flood
-   其中最常见、最主要的是 TCP Flood 中的 SYN Flood 攻击

**DDoS 攻击防范措施：**

-   增加带宽
-   安装防火墙和入侵检测系统
-   使用 CDN
-   采用负载均衡技术
-   实施 IP 黑名单策略
-   与专业 DDoS 防护服务商合作
-   制定应急预案

**腾讯云 DDoS 防护方案：**

-   DDoS 基础防护包
-   DDoS 高防包
-   DDoS 高防 IP

**DDoS 防护原理：**

-   镜像牵引回注技术。

### 5.2. 云防火墙 CFW

**防火墙概述：**

> 什么是防火墙？

**防火墙的发展历史：**

-   1989 年：包过滤
-   1993 年：应用代理
-   1994 年：状态检测
-   1995 年：专用设备
-   2004 年：UTM
-   2005 年：DPI
-   2009 年：下一代防火墙 NGFW

**腾讯云防火墙：**

看官方文档。
